<!--
 受信エリア -->
{% extends "base.html" %}

{% block title %}西暦2525年{% endblock %}

{% block content %}

<head>
  <meta charset="utf-8">
  <title>西暦2525年</title>
  <meta name="description" content="ユーザー同士で通信対戦ゲームをプレイできる掲示板サイト。図形操作、オンライン対戦、ブログ機能付き。">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="canonical" href="https://html-mq6q.onrender.com/">
</head>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "url": "https://html-mq6q.onrender.com/",
  "name": "西暦2525年",
  "potentialAction": {
    "@type": "SearchAction",
    "target": "https://html-mq6q.onrender.com/?q={search_term_string}",
    "query-input": "required name=search_term_string"
  }
}
</script>

<style>
    body {
      font-family: "Arial", "Yu Gothic", sans-serif;
      text-align: center;
      margin-top: 100px;
      justify-content: center; /* 横中央 */
      align-items: center;     /* 縦中央 */

    }
    .main-text {
      font-size: 60px;
      font-weight: bold;
    }
    .year {
      font-size: 150px;
      font-weight: bold;
      color: red;
    }
    .sub-text {
      margin-top: 10px;
      font-size: 18px;
      font-weight: bold;
      color: green;
      letter-spacing: 2px;
    }
    .jp-sub {
      margin-top: 5px;
      font-size: 16px;
    }

    .green-box {
      position: absolute;
      top: 50%;       /* 画面の縦中央 */
      left: 50%;      /* 画面の横中央 */
      transform: translate(-200%, -40%); /* 自身の幅・高さの半分だけずらす */
      width: 100px;
      padding: 20px;
      margin: 100px;
      font-size: 15px;
      border: 3px solid rgb(0, 0, 0);
    }

    .green-box a {
      display: block;
      margin: 10px 0;
      text-decoration: none;
      color: black;

      transition: color 0.2s;
    }

    .green-box a:hover {
      color: darkgreen;
      font-weight: bold;
    }
    
    .container {
      display: flex;           /* 子要素を横並びに */
      align-items: flex-start; /* 高さの基準を上揃え */
      gap: 20px;               /* green-box と blue-box の間隔 */
    }

    .blue-box {
      left: 50%;
      transform: translateX(280%);
      top: 20px;
      right: 20px;
      width: 250px;
      height: 50px;
      padding: 10px;
      border: 3px solid rgb(0, 0, 0);
      box-sizing: border-box;
      font-size: 16px;
      color: rgb(0, 0, 0);
    }

    .p {
      text-align:center;
    }
  </style>



<div class="main-text">
    西暦 <span class="year">2525</span> 年
  </div>
  <div class="sub-text">
    IN THE YEAR 2525
  </div>
  <div class="jp-sub">
    (Exordium & Terminus)<br>
    ゼーガーとエバンズ
  </div>
<!-- 送信フォーム -->
 <!--
<input id="msg" type="text" placeholder="メッセージを入力" style="width:300px;">
<button onclick="sendMessage()">送信</button>
-->

<p>
<div class="container">
<div class="green-box">
  <a href="/me" data-desc="*こんにちは">Hello</a>
  <a href="/temp" data-desc="*仮">kari</a>
  <a href="/game" data-desc="*心理ゲーム-DOUBLE MINE-">DOUBLE MINE</a>
  <a href="/blog" data-desc="*アーカイブ">Archive</a>
  <a href="/other" data-desc="*その他">other</a>

</div>
<div class="blue-box" id="desc-box">
  **info
</div>
</div>
</p>


<script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
<script>
  //const socket = io();
  const socket = io(window.location.origin);

  const links = document.querySelectorAll(".green-box a");
  const descBox = document.getElementById("desc-box");

  links.forEach(link => {
    link.addEventListener("mouseover", () => {
      descBox.textContent = link.dataset.desc;
    });
    link.addEventListener("mouseout", () => {
      descBox.textContent = "*info";
    });
  });

  socket.on("connect", () => {
    console.log("✅ 接続成功");
  });

  // メッセージ受信
  socket.on("message", (data) => {
    const log = document.getElementById("log");
    const p = document.createElement("p");
    p.textContent = data.msg;
    log.appendChild(p);
    // 常に最新のメッセージが見えるようにスクロール
    log.scrollTop = log.scrollHeight;
    console.log(log);
    console.log(p);
  });

  // メッセージ送信
  function sendMessage() {
    const msg = document.getElementById("msg").value;
    if(msg.trim() === "") return;
    socket.emit("message", msg);
    document.getElementById("msg").value = "";
  }

  // Enterキーでも送信
  document.getElementById("msg").addEventListener("keydown", (e) => {
    if(e.key === "Enter") sendMessage();
  });
</script>
{% endblock %}